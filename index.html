<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <title>OlÃ¡ Mundo - InicializaÃ§Ã£o</title>
</head>
<body>
    <!-- Pipefy Apps SDK.js -->
    <script src="https://platform.staticpipefy.com/pipefy-app.js"></script>
    <script>
        // Inicializar SDK
        var pipefyClient;
        
        document.addEventListener('DOMContentLoaded', function () {
            pipefyClient = PipefyApp.init();
            console.log('âœ… SDK Pipefy inicializado');
        });

        // Configurar features do app
        PipefyApp.initCall({
            // ðŸŽ¯ PIPE VIEW - PÃ¡gina interna no Pipe
            'pipe-view': function(p, pipe) {
                return {
                    icon: 'https://cdn.glitch.com/03813ab1-4482-45be-b7f7-74e8948d7ae7%2Femoji-icon.svg?1505355049359',
                    text: 'OlÃ¡ Mundo',
                    url: './pipe-view.html',
                    hide_create_button: false
                };
            },
            
            // ðŸŽ¨ CARD BUTTONS - BotÃµes no Card
            'card-buttons': function(p, pipe) {
                return [
                    {
                        icon: 'https://cdn.glitch.com/03813ab1-4482-45be-b7f7-74e8948d7ae7%2Femoji-icon.svg?1505355049359',
                        text: 'OlÃ¡ Card',
                        callback: function(p) {
                            // AÃ§Ã£o direta sem modal/sidebar
                            alert('ðŸ‘‹ OlÃ¡ do Card #' + p.card.id + '!');
                            console.log('Card atual:', p.card);
                        }
                    }
                ];
            },
            
            // ðŸ·ï¸ CARD BADGES - Badges do Card
            'card-badges': function(p, pipe) {
                return [
                    {
                        text: 'ðŸ‘‹ OlÃ¡',
                        color: '#4CAF50',
                        title: 'Badge de saudaÃ§Ã£o'
                    },
                    {
                        text: 'ðŸŒ Mundo',
                        color: '#2196F3', 
                        title: 'Badge mundial'
                    }
                ];
            },
            
            // ðŸ“‘ CARD TAB - Nova aba no Card
            'card-tab': function(p, pipe) {
                return {
                    title: 'OlÃ¡ Mundo',
                    icon: 'https://cdn.glitch.com/03813ab1-4482-45be-b7f7-74e8948d7ae7%2Femoji-icon.svg?1505355049359',
                    url: './card-tab.html',
                    claimedAttachments: function(attachments) {
                        // Filtrar anexos do app (se houver)
                        return attachments.filter(function(attachment) {
                            return attachment.url.indexOf('hello-world-app') >= 0;
                        });
                    },
                    buttons: [
                        {
                            text: 'Testar',
                            callback: function(p) {
                                alert('âœ… Teste da aba executado!');
                            }
                        }
                    ]
                };
            }
        });

        console.log('ðŸš€ App OlÃ¡ Mundo configurado com sucesso!');
    </script>
</body>
</html>