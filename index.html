<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8">
    <title>Ol√° Mundo - Pipefy App</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f7fa;
        }
        .welcome {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 { color: #2c3e50; }
        .emoji { font-size: 2em; }
        .info-box {
            background: #e8f4fd;
            border-left: 4px solid #0081ff;
            padding: 15px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="welcome">
        <h1>üåç Ol√°, Mundo!</h1>
        <p>Este √© seu app Pipefy demonstrativo!</p>
        <div class="info-box">
            <strong>‚ú® Recursos ativos:</strong>
            <ul>
                <li>Bot√µes no Pipe</li>
                <li>Bot√µes no Card</li>
                <li>Badges no Card</li>
                <li>Abas no Card</li>
            </ul>
        </div>
    </div>

    <!-- Pipefy Client SDK -->
    <script src="https://platform.staticpipefy.com/pipefy-app.js"></script>
    
    <script>
        // Inicializa√ß√£o do App
        PipefyApp.initCall({
            
            // üéØ PIPE BUTTONS - Bot√µes no topo do Pipe
            'pipe-buttons': function(p, pipe) {
                return [
                    {
                        icon: 'https://cdn.glitch.com/03813ab1-4482-45be-b7f7-74e8948d7ae7%2Femoji-icon.svg?1505355049359',
                        text: 'Ol√° Mundo',
                        callback: function(p) {
                            // Abre dropdown com op√ß√µes
                            p.dropdown({
                                title: 'üåç Menu Ol√° Mundo',
                                items: [
                                    {
                                        title: 'üëã Sauda√ß√£o',
                                        callback: function(p) {
                                            p.modal({
                                                title: 'Sauda√ß√£o Personalizada',
                                                url: './pages/saudacao.html',
                                                height: 400
                                            });
                                        }
                                    },
                                    {
                                        title: 'üìä Dashboard',
                                        callback: function(p) {
                                            p.sidebar({
                                                title: 'Dashboard do App',
                                                url: './pages/dashboard.html'
                                            });
                                        }
                                    },
                                    {
                                        title: '‚öôÔ∏è Configura√ß√µes',
                                        callback: function(p) {
                                            p.sidebar({
                                                title: 'Configura√ß√µes',
                                                url: './pages/config.html'
                                            });
                                        }
                                    },
                                    {
                                        title: 'üìö Ajuda',
                                        callback: function(p) {
                                            p.modal({
                                                title: 'Central de Ajuda',
                                                url: './pages/ajuda.html',
                                                height: 500
                                            });
                                        }
                                    },
                                    {
                                        title: 'Teste R√°pido',
                                        callback: function(p) {
                                            // Exemplo de a√ß√£o direta
                                            p.showNotification('‚úÖ Teste executado com sucesso!');
                                            
                                            // Log no console para debug
                                            console.log('Pipe atual:', pipe);
                                            console.log('ID do Pipe:', pipe.id);
                                            console.log('Nome do Pipe:', pipe.name);
                                        }
                                    }
                                ]
                            });
                        }
                    }
                ];
            },
            
            // üé® CARD BUTTONS - Bot√µes no Card
            'card-buttons': function(p, pipe, card) {
                return [
                    {
                        icon: 'https://cdn.glitch.com/03813ab1-4482-45be-b7f7-74e8948d7ae7%2Femoji-icon.svg?1505355049359',
                        text: 'Ol√° Card',
                        callback: function(p) {
                            p.dropdown({
                                title: 'üé¥ A√ß√µes do Card',
                                items: [
                                    {
                                        title: 'üìù Ver Detalhes',
                                        callback: function(p) {
                                            p.modal({
                                                title: 'Detalhes do Card #' + card.id,
                                                url: './pages/card-details.html?id=' + card.id,
                                                height: 400
                                            });
                                        }
                                    },
                                    {
                                        title: 'üè∑Ô∏è Adicionar Tag',
                                        callback: function(p) {
                                            p.modal({
                                                title: 'Adicionar Tag',
                                                url: './pages/add-tag.html',
                                                height: 300
                                            });
                                        }
                                    },
                                    {
                                        title: 'üìä Estat√≠sticas',
                                        callback: function(p) {
                                            p.sidebar({
                                                title: 'Estat√≠sticas do Card',
                                                url: './pages/card-stats.html'
                                            });
                                        }
                                    }
                                ]
                            });
                        }
                    },
                    {
                        icon: 'https://cdn.glitch.com/03813ab1-4482-45be-b7f7-74e8948d7ae7%2Femoji-icon.svg?1505355049359',
                        text: 'A√ß√£o R√°pida',
                        callback: function(p) {
                            // A√ß√£o direta no card
                            p.showSuccess('Card processado!');
                            
                            // Atualizar badge (exemplo)
                            console.log('Card processado:', card.title);
                        }
                    }
                ];
            },
            
            // üè∑Ô∏è CARD BADGES - Badges do Card
            'card-badges': function(p, pipe, card) {
                // Badges din√¢micos baseados no card
                const badges = [];
                
                // Badge de exemplo 1
                badges.push({
                    text: 'Ol√°!',
                    color: '#4CAF50', // Verde
                    title: 'Este √© um badge de sauda√ß√£o'
                });
                
                // Badge condicional
                if (card.title && card.title.toLowerCase().includes('urgente')) {
                    badges.push({
                        text: 'üî• Urgente',
                        color: '#FF5722', // Vermelho
                        title: 'Card marcado como urgente'
                    });
                }
                
                // Badge com contador
                badges.push({
                    text: 'üëÅÔ∏è ' + Math.floor(Math.random() * 100),
                    color: '#2196F3', // Azul
                    title: 'Visualiza√ß√µes do card'
                });
                
                return badges;
            },
            
            // üìë CARD TAB - Nova aba no Card
            'card-tab': function(p, pipe, card) {
                return {
                    icon: 'https://cdn.glitch.com/03813ab1-4482-45be-b7f7-74e8948d7ae7%2Femoji-icon.svg?1505355049359',
                    title: 'Ol√° Mundo',
                    url: './pages/card-tab.html',
                    
                    // Gerenciar anexos espec√≠ficos (opcional)
                    claimedAttachments: function(attachments) {
                        // Filtrar anexos que pertencem ao app
                        return attachments.filter(function(attachment) {
                            return attachment.url.includes('hello-world-app');
                        });
                    },
                    
                    // Bot√µes na aba
                    buttons: [
                        {
                            text: '‚ûï Adicionar Item',
                            callback: function(p) {
                                p.modal({
                                    title: 'Adicionar Novo Item',
                                    url: './pages/add-item.html',
                                    height: 400
                                });
                            }
                        },
                        {
                            text: 'üîÑ Sincronizar',
                            callback: function(p) {
                                // Simular sincroniza√ß√£o
                                p.showNotification('Sincronizando...');
                                
                                setTimeout(function() {
                                    p.showSuccess('‚úÖ Sincronizado com sucesso!');
                                }, 2000);
                            }
                        },
                        {
                            text: 'üì§ Exportar',
                            callback: function(p) {
                                p.dropdown({
                                    title: 'Exportar Dados',
                                    items: [
                                        {
                                            title: 'üìÑ PDF',
                                            callback: function() {
                                                p.showNotification('Exportando para PDF...');
                                            }
                                        },
                                        {
                                            title: 'üìä Excel',
                                            callback: function() {
                                                p.showNotification('Exportando para Excel...');
                                            }
                                        },
                                        {
                                            title: 'üìù CSV',
                                            callback: function() {
                                                p.showNotification('Exportando para CSV...');
                                            }
                                        }
                                    ]
                                });
                            }
                        }
                    ]
                };
            }
        });
        
        // Log de inicializa√ß√£o
        console.log('üöÄ App Ol√° Mundo inicializado com sucesso!');
    </script>
</body>
</html>